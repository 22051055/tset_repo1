<!DOCTYPE html>
<html>
<head>
    <title>大橋林道to戸隠</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <style>
        #map, #graph {
            width: 100%;
            height: 50vh;
        }
        #slider-container {
            display: flex;
            justify-content: center;
            margin-top: 0px;
        }
        #slider {
            width: 100%;
        }
        #distances, #elevations, #checkpoint_time {
            text-align: center;
            margin-top: 10px;
        }        
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" />
</head>
<body>
    <div id="title"><a>大橋林道to戸隠</a></div>
    <div id="map"></div>
    <div id="graph" style="touch-action: manipulation;"></div>
    <div id="slider-container">
        <input type="range" id="slider" min="0" max="100" value="0" />
    </div>
    <div id="distances">
        <p>水平距離: <span id="horizontal-distance"></span> km</p>
        <p>沿面距離: <span id="surface-distance"></span> km</p>
    </div>
    <div id="elevations">
        <p>累積標高上り: <span id="total-ascent"></span> m</p>
        <p>累積標高下り: <span id="total-descent"></span> m</p>
        <p>最高標高: <span id="max-elevation"></span> m</p>
        <p>最低標高: <span id="min-elevation"></span> m</p>
    </div>
    <div id="checkpoint_time"><a>戸隠関門時間 16日（月）00：00</a></div>
    <div>
        <a href="2-3_Ohashirindo_to_Togakushi.gpx" download>GPXファイルをダウンロード</a>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
　　<script>
        $(document).ready(function() {
            // 地図の初期化
            var map = L.map('map').setView([36.7849, 138.09744], 14);
            L.tileLayer('https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png', {
                maxZoom: 18,
                attribution: '&copy; <a href="https://maps.gsi.go.jp/development/ichiran.html">国土地理院</a>'
            }).addTo(map);

            // GPXトラックの表示
            var latlngs = [
                
                    [36.7849, 138.09744, 1174,],

                    [36.78419, 138.09764, 1169,],

                    [36.78404, 138.09768, 1168,],

                    [36.78376, 138.09789, 1167,],

                    [36.78356, 138.09823, 1167,],

                    [36.78356, 138.09823, 1167,],

                    [36.78348, 138.09839, 1168,],

                    [36.78317, 138.09856, 1167,],

                    [36.78278, 138.09874, 1163,],

                    [36.78258, 138.09876, 1161,],

                    [36.78258, 138.09876, 1161,],

                    [36.78248, 138.09876, 1160,],

                    [36.7822, 138.09871, 1157,],

                    [36.78168, 138.0987, 1153,],

                    [36.78158, 138.09877, 1152,],

                    [36.78137, 138.09897, 1149,],

                    [36.78107, 138.09903, 1146,],

                    [36.78108, 138.09879, 1146,],

                    [36.78107, 138.09861, 1146,],

                    [36.78105, 138.09824, 1145,],

                    [36.78112, 138.09801, 1148,],

                    [36.78114, 138.09786, 1150,],

                    [36.78133, 138.09768, 1152,],

                    [36.78144, 138.09757, 1152,],

                    [36.78146, 138.09739, 1154,],

                    [36.78138, 138.09711, 1155,],

                    [36.78139, 138.09707, 1155,],

                    [36.78157, 138.09693, 1156,],

                    [36.78165, 138.09684, 1157,],

                    [36.78174, 138.09679, 1158,],

                    [36.78197, 138.09662, 1159,],

                    [36.78219, 138.09634, 1161,],

                    [36.78238, 138.09618, 1163,],

                    [36.78257, 138.09617, 1164,],

                    [36.78285, 138.09546, 1165,],

                    [36.78295, 138.09525, 1166,],

                    [36.78268, 138.09531, 1164,],

                    [36.78243, 138.09533, 1164,],

                    [36.78236, 138.09533, 1163,],

                    [36.78233, 138.09528, 1163,],

                    [36.78236, 138.09518, 1163,],

                    [36.78253, 138.09505, 1164,],

                    [36.78269, 138.09488, 1165,],

                    [36.78276, 138.09482, 1165,],

                    [36.78277, 138.09478, 1165,],

                    [36.78289, 138.09474, 1166,],

                    [36.78292, 138.09469, 1166,],

                    [36.78289, 138.09464, 1166,],

                    [36.78286, 138.09461, 1166,],

                    [36.78279, 138.09466, 1165,],

                    [36.78267, 138.09464, 1165,],

                    [36.78256, 138.09458, 1165,],

                    [36.78252, 138.09462, 1164,],

                    [36.78247, 138.09475, 1164,],

                    [36.78238, 138.09482, 1164,],

                    [36.78227, 138.09483, 1163,],

                    [36.78211, 138.09492, 1162,],

                    [36.78206, 138.09492, 1162,],

                    [36.78196, 138.0948, 1162,],

                    [36.78187, 138.09469, 1162,],

                    [36.78194, 138.09403, 1164,],

                    [36.782, 138.09368, 1167,],

                    [36.78208, 138.09294, 1170,],

                    [36.78214, 138.09245, 1173,],

                    [36.78218, 138.09237, 1173,],

                    [36.78235, 138.09228, 1173,],

                    [36.78247, 138.09226, 1172,],

                    [36.78268, 138.09229, 1173,],

                    [36.78274, 138.09231, 1173,],

                    [36.78278, 138.09227, 1174,],

                    [36.78278, 138.09222, 1174,],

                    [36.78272, 138.09208, 1174,],

                    [36.78274, 138.09206, 1174,],

                    [36.78278, 138.09203, 1175,],

                    [36.78281, 138.09204, 1175,],

                    [36.78288, 138.09222, 1175,],

                    [36.78286, 138.0924, 1173,],

                    [36.78298, 138.09255, 1174,],

                    [36.78324, 138.09278, 1172,],

                    [36.78328, 138.09278, 1172,],

                    [36.78331, 138.09277, 1173,],

                    [36.7834, 138.0927, 1173,],

                    [36.7835, 138.09268, 1174,],

                    [36.78357, 138.09268, 1174,],

                    [36.78371, 138.09264, 1175,],

                    [36.78375, 138.09259, 1176,],

                    [36.78379, 138.09252, 1176,],

                    [36.7838, 138.09245, 1176,],

                    [36.78383, 138.09241, 1176,],

                    [36.78391, 138.09236, 1177,],

                    [36.78388, 138.09233, 1177,],

                    [36.7839, 138.09229, 1177,],

                    [36.78392, 138.09227, 1177,],

                    [36.78396, 138.09228, 1178,],

                    [36.78398, 138.09228, 1178,],

                    [36.78402, 138.09225, 1178,],

                    [36.78403, 138.09223, 1178,],

                    [36.78406, 138.09217, 1178,],

                    [36.78403, 138.09214, 1178,],

                    [36.78404, 138.09211, 1178,],

                    [36.78408, 138.09208, 1179,],

                    [36.78408, 138.092, 1179,],

                    [36.78408, 138.09195, 1180,],

                    [36.78405, 138.09192, 1179,],

                    [36.78406, 138.0919, 1179,],

                    [36.78409, 138.0919, 1180,],

                    [36.78409, 138.09187, 1180,],

                    [36.7841, 138.09181, 1180,],

                    [36.78411, 138.09177, 1181,],

                    [36.78411, 138.09175, 1181,],

                    [36.7841, 138.09172, 1181,],

                    [36.78409, 138.09168, 1182,],

                    [36.78408, 138.09166, 1182,],

                    [36.78408, 138.09158, 1183,],

                    [36.78407, 138.09151, 1184,],

                    [36.78407, 138.09147, 1184,],

                    [36.78406, 138.09142, 1184,],

                    [36.78405, 138.09137, 1184,],

                    [36.78402, 138.09131, 1185,],

                    [36.78407, 138.09106, 1188,],

                    [36.78416, 138.09063, 1193,],

                    [36.78418, 138.09054, 1194,],

                    [36.78418, 138.09047, 1195,],

                    [36.78415, 138.09041, 1196,],

                    [36.7841, 138.09035, 1196,],

                    [36.78392, 138.09025, 1196,],

                    [36.78378, 138.09001, 1199,],

                    [36.78369, 138.08995, 1200,],

                    [36.78341, 138.08976, 1198,],

                    [36.78303, 138.08956, 1196,],

                    [36.78299, 138.08952, 1195,],

                    [36.78277, 138.08951, 1191,],

                    [36.78265, 138.08939, 1191,],

                    [36.78263, 138.08938, 1193,],

                    [36.78259, 138.08951, 1189,],

                    [36.78259, 138.08958, 1189,],

                    [36.78254, 138.08961, 1188,],

                    [36.78246, 138.0896, 1188,],

                    [36.78243, 138.08946, 1190,],

                    [36.78234, 138.08937, 1190,],

                    [36.78218, 138.08923, 1191,],

                    [36.78208, 138.08903, 1195,],

                    [36.78196, 138.08878, 1197,],

                    [36.78175, 138.08844, 1200,],

                    [36.78169, 138.08828, 1202,],

                    [36.78169, 138.08807, 1205,],

                    [36.78175, 138.08794, 1206,],

                    [36.78155, 138.08743, 1212,],

                    [36.78106, 138.08667, 1221,],

                    [36.78054, 138.08631, 1222,],

                    [36.78048, 138.08623, 1223,],

                    [36.78043, 138.08619, 1223,],

                    [36.78034, 138.08615, 1224,],

                    [36.78014, 138.08595, 1226,],

                    [36.77997, 138.08584, 1227,],

                    [36.77985, 138.08574, 1228,],

                    [36.77966, 138.08553, 1229,],

                    [36.77946, 138.08528, 1230,],

                    [36.77924, 138.08513, 1229,],

                    [36.77896, 138.08495, 1228,],

                    [36.77862, 138.0847, 1227,],

                    [36.77833, 138.08451, 1226,],

                    [36.77809, 138.08429, 1227,],

                    [36.77791, 138.08404, 1231,],

                    [36.77772, 138.08385, 1231,],

                    [36.77748, 138.08365, 1231,],

                    [36.77719, 138.08344, 1229,],

                    [36.77714, 138.08337, 1230,],

                    [36.77704, 138.08324, 1231,],

                    [36.77642, 138.08253, 1230,],

                    [36.77594, 138.08197, 1230,],

                    [36.77565, 138.08159, 1229,],

                    [36.7755, 138.08149, 1230,],

                    [36.77538, 138.08157, 1228,],

                    [36.77528, 138.08186, 1225,],

                    [36.77476, 138.08287, 1217,],

                    [36.77429, 138.08363, 1211,],

                    [36.77402, 138.08408, 1208,],

                    [36.77352, 138.08501, 1204,],

                    [36.77338, 138.08528, 1203,],

                    [36.77308, 138.08578, 1200,],

                    [36.7728, 138.08626, 1197,],

                    [36.77274, 138.08626, 1197,],

                    [36.77264, 138.08585, 1198,],

                    [36.77232, 138.08527, 1197,],

                    [36.77224, 138.08517, 1197,],

                    [36.77195, 138.08493, 1196,],

                    [36.77179, 138.08474, 1195,],

                    [36.77149, 138.0844, 1195,],

                    [36.7712, 138.08418, 1193,],

                    [36.77112, 138.08402, 1193,],

                    [36.77113, 138.08387, 1194,],

                    [36.7711, 138.08362, 1195,],

                    [36.77094, 138.08333, 1195,],

                    [36.77082, 138.08313, 1195,],

                    [36.77069, 138.08293, 1196,],

                    [36.77062, 138.08248, 1197,],

                    [36.77069, 138.08217, 1199,],

                    [36.77069, 138.08197, 1200,],

                    [36.77069, 138.0818, 1202,],

                    [36.77081, 138.08154, 1203,],

                    [36.77085, 138.08139, 1204,],

                    [36.77097, 138.0812, 1206,],

                    [36.77108, 138.08083, 1209,],

                    [36.77118, 138.08059, 1210,],

                    [36.77135, 138.08004, 1214,],

                    [36.77142, 138.07988, 1215,],

                    [36.77143, 138.07966, 1217,],

                    [36.77156, 138.07934, 1219,],

                    [36.77174, 138.07912, 1221,],

                    [36.77195, 138.07884, 1225,],

                    [36.77208, 138.07859, 1228,],

                    [36.77197, 138.07836, 1229,],

                    [36.77168, 138.07826, 1229,],

                    [36.77146, 138.07815, 1229,],

                    [36.77124, 138.07811, 1228,],

                    [36.77106, 138.07796, 1229,],

                    [36.7709, 138.07776, 1230,],

                    [36.77081, 138.07773, 1231,],

                    [36.7707, 138.07769, 1231,],

                    [36.77062, 138.07772, 1230,],

                    [36.77026, 138.07753, 1230,],

                    [36.77004, 138.07751, 1229,],

                    [36.76987, 138.07742, 1228,],

                    [36.76954, 138.07737, 1224,],

                    [36.76942, 138.07738, 1225,],

                    [36.76916, 138.07725, 1220,],

                    [36.76886, 138.0772, 1219,],

                    [36.7686, 138.07725, 1219,],

                    [36.76844, 138.07726, 1218,],

                    [36.76842, 138.07719, 1217,],

                    [36.7684, 138.07698, 1217,],

                    [36.76853, 138.07658, 1223,],

                    [36.76856, 138.0763, 1225,],

                    [36.76857, 138.07609, 1225,],

                    [36.76844, 138.07582, 1228,],

                    [36.7684, 138.07551, 1230,],

                    [36.76838, 138.0753, 1232,],

                    [36.76844, 138.07492, 1235,],

                    [36.76843, 138.07482, 1236,],

                    [36.76845, 138.07466, 1238,],

                    [36.76834, 138.07422, 1242,],

                    [36.76829, 138.07402, 1245,],

                    [36.76833, 138.07385, 1248,],

                    [36.7683, 138.07362, 1249,],

                    [36.76814, 138.07336, 1252,],

                    [36.76801, 138.07307, 1255,],

                    [36.76786, 138.07282, 1256,],

                    [36.76773, 138.07258, 1256,],

                    [36.76764, 138.07228, 1258,],

                    [36.76745, 138.07203, 1258,],

                    [36.76719, 138.07189, 1258,],

                    [36.76694, 138.07172, 1258,],

                    [36.76688, 138.07163, 1259,],

                    [36.76675, 138.07144, 1259,],

                    [36.76631, 138.07109, 1255,],

                    [36.7662, 138.07099, 1255,],

                    [36.7659, 138.0708, 1252,],

                    [36.7655, 138.0705, 1253,],

                    [36.76537, 138.07044, 1252,],

                    [36.7648, 138.07028, 1250,],

                    [36.76394, 138.06985, 1247,],

                    [36.76316, 138.06992, 1245,],

                    [36.76264, 138.06993, 1243,],

                    [36.7623, 138.06984, 1241,],

                    [36.7611, 138.06933, 1239.8,],

                    [36.76108, 138.06932, 1240.4,],

                    [36.76094, 138.06927, 1240.7,],

                    [36.7608, 138.06925, 1240.7,],

                    [36.76069, 138.06914, 1240.6,],

                    [36.7605, 138.06892, 1240.9,],

                    [36.7604, 138.06879, 1240.9,],

                    [36.76027, 138.06876, 1240.3,],

                    [36.76016, 138.06873, 1240,],

                    [36.75957, 138.06842, 1239,],

                    [36.75897, 138.06814, 1238,],

                    [36.75869, 138.06802, 1236,],

                    [36.75851, 138.06791, 1236,],

                    [36.75841, 138.06781, 1236,],

                    [36.75832, 138.06771, 1236,],

                    [36.7583, 138.0676, 1236,],

                    [36.75824, 138.06752, 1236,],

                    [36.75822, 138.0675, 1237,],

                    [36.75821, 138.06743, 1237,],

                    [36.75799, 138.06736, 1236,],

                    [36.75784, 138.06717, 1235,],

                    [36.75775, 138.06713, 1235,],

                    [36.75766, 138.06702, 1235,],

                    [36.75758, 138.06696, 1235,],

                    [36.7575, 138.06702, 1234,],

                    [36.75748, 138.06708, 1234,],

                    [36.7574, 138.0672, 1233,],

                    [36.75707, 138.06714, 1231,],

                    [36.7568, 138.06711, 1230,],

                    [36.75647, 138.06707, 1229,],

                    [36.75627, 138.06707, 1228,],

                    [36.75604, 138.06701, 1228,],

                    [36.75545, 138.06675, 1225,],

                    [36.7552, 138.0667, 1224,],

                    [36.75485, 138.06663, 1223,],

                    [36.75472, 138.06662, 1221,],

                    [36.75456, 138.06649, 1220,],

                    [36.7542, 138.06602, 1219,],

                    [36.75403, 138.06574, 1219,],

                    [36.75359, 138.06503, 1215,],

                    [36.75349, 138.06478, 1215.7,],

                    [36.75338, 138.06456, 1214.5,],

                    [36.75332, 138.06428, 1213.7,],

                    [36.75325, 138.06418, 1213.3,],

                    [36.75301, 138.06405, 1211.5,],

                    [36.7529, 138.06396, 1210.8,],

                    [36.75276, 138.06395, 1210.2,],

                    [36.75265, 138.06382, 1209.7,],

                    [36.75242, 138.06384, 1209.6,],

                    [36.7521, 138.06376, 1208,],

                    [36.75168, 138.06375, 1206.5,],

                    [36.75125, 138.06366, 1204.8,],

                    [36.75095, 138.06357, 1203.7,],

                    [36.75046, 138.06359, 1202.8,],

                    [36.75019, 138.06362, 1205.1,],

                    [36.74979, 138.06363, 1210.1,],

                    [36.74975, 138.06363, 1209.7,],

                    [36.74959, 138.06368, 1209.2,],

                    [36.74944, 138.06371, 1208.5,],

                    [36.74928, 138.06372, 1207.6,],

                    [36.74917, 138.06374, 1207.7,],

                    [36.749, 138.06389, 1208.1,],

                    [36.7487, 138.064, 1206.8,],

                    [36.74835, 138.06411, 1206.3,],

                    [36.7481, 138.06424, 1203.3,],

                    [36.7482, 138.06446, 1204.4,],

                    [36.74833, 138.06475, 1207.5,],

                    [36.74831, 138.06521, 1214.1,],

                    [36.74825, 138.06536, 1215,],

                    [36.74716, 138.06584, 1212.4,],

                    [36.74685, 138.06603, 1210.5,],

                    [36.7463, 138.06637, 1211.5,],

                    [36.74583, 138.06644, 1215.5,],

                    [36.7456, 138.06658, 1214.7,],

                    [36.74541, 138.06674, 1216.9,],

                    [36.7453, 138.06709, 1216.1,],

                    [36.74512, 138.06747, 1217.9,],

                    [36.74472, 138.06804, 1215.5,],

                    [36.74449, 138.06839, 1220.9,],

                    [36.74441, 138.0686, 1223.3,],

                    [36.7443, 138.06885, 1225.3,],

                    [36.74424, 138.06936, 1230.2,],

                    [36.74439, 138.06984, 1238.3,],

                    [36.74441, 138.07022, 1245.8,],

                    [36.74432, 138.07067, 1251,],

                    [36.7444, 138.07104, 1251.1,],

                    [36.74472, 138.07134, 1251.8,],

                    [36.74482, 138.07169, 1251.2,],

                    [36.74483, 138.07226, 1252.4,],

                    [36.74494, 138.0726, 1251,],

                    [36.74509, 138.07287, 1257,],

                    [36.74523, 138.07297, 1257.2,],

                    [36.74546, 138.07308, 1257.7,],

                    [36.74572, 138.07308, 1257.8,],

                    [36.74598, 138.0733, 1259,],

                    [36.74635, 138.07343, 1261.9,],

                    [36.74669, 138.07362, 1263.4,],

                    [36.7468, 138.07375, 1264.5,],

                    [36.74662, 138.07395, 1263.8,],

                    [36.74647, 138.07408, 1264.1,],

                    [36.74612, 138.07437, 1266.1,],

                    [36.74552, 138.07457, 1272.7,],

                    [36.74494, 138.07449, 1279.2,],

                    [36.74458, 138.0746, 1282,],

                    [36.74426, 138.07468, 1282.5,],

                    [36.74407, 138.07476, 1283.5,],

                    [36.74388, 138.07498, 1283.3,],

                    [36.74361, 138.07521, 1280.5,],

                    [36.74325, 138.07562, 1272.3,],

                    [36.74301, 138.07589, 1267,],

                    [36.7426, 138.07624, 1261.6,],

                    [36.74241, 138.07642, 1258.4,],

                    [36.74228, 138.07665, 1255.1,],

                    [36.74203, 138.07706, 1249,],

                    [36.74203, 138.07727, 1244.1,],

                    [36.74196, 138.07743, 1239.7,],

                    [36.74173, 138.07776, 1231.3,],

                    [36.74179, 138.07798, 1228.8,],

                    [36.74189, 138.07817, 1227,],

                    [36.74197, 138.0783, 1225,],

                    [36.74211, 138.07864, 1220.5,],

                    [36.74223, 138.07896, 1217.6,],

                    [36.74228, 138.07912, 1215.7,],

                    [36.74229, 138.0792, 1216.4,],

                    [36.74225, 138.07954, 1216.9,],

                    [36.7424, 138.07954, 1218.7,],

                    [36.74265, 138.07966, 1222.7,],

                    [36.74275, 138.07967, 1221.5,],

                    [36.74287, 138.0797, 1223,],

                    [36.74297, 138.0797, 1222.5,],

                    [36.74308, 138.07964, 1222.8,],

                    [36.74315, 138.07956, 1222.4,],

                    [36.74323, 138.07952, 1222.5,],

                    [36.74334, 138.07952, 1222.8,],

                    [36.74343, 138.07962, 1223.3,],

                    [36.74371, 138.07976, 1223.7,],

                    [36.74385, 138.07987, 1223.9,],

                    [36.74399, 138.07999, 1223.3,],

                    [36.74406, 138.08006, 1223.9,],

                    [36.74411, 138.08005, 1224.1,],

                    [36.74419, 138.0802, 1225.1,],

                    [36.74431, 138.08031, 1225.8,],

                    [36.74446, 138.08039, 1226.8,],

                    [36.74456, 138.08046, 1227,],

                    [36.7446, 138.08054, 1227.4,],

                    [36.7447, 138.08062, 1227.9,],

                    [36.74483, 138.08065, 1228.6,],

                    [36.74497, 138.08077, 1229.6,],

                    [36.74524, 138.08064, 1229.8,],

                    [36.74547, 138.08055, 1230.5,],

                    [36.74621, 138.08048, 1234.9,],

                    [36.74656, 138.0805, 1238,],

                    [36.74671, 138.08072, 1239.7,],

                    [36.7469, 138.08087, 1240.9,],

                    [36.74721, 138.08108, 1239.3,],

                    [36.74724, 138.08109, 1239.3,],

                    [36.74738, 138.08123, 1237.8,],

                    [36.74745, 138.08134, 1236.2,],

                    [36.74768, 138.08129, 1234.5,],

                    [36.74806, 138.08135, 1231.9,],

                    [36.74845, 138.08126, 1230.3,],

                    [36.74878, 138.08126, 1229.2,],

                    [36.74906, 138.08124, 1228.3,],

                    [36.7494, 138.08116, 1227.2,],

                    [36.74954, 138.08113, 1227.1,],

                    [36.74966, 138.08107, 1227.5,],

                    [36.74979, 138.08119, 1228,],

                    [36.75004, 138.08137, 1230.6,],

                    [36.75011, 138.08142, 1231.5,],

                    [36.75021, 138.08152, 1232.6,],

                    [36.75029, 138.08158, 1233.3,],

                    [36.75039, 138.08164, 1234,],

                    [36.75101, 138.08214, 1237.1,],

                    [36.75116, 138.08227, 1236.7,],

                    [36.7514, 138.0825, 1237.1,],

                    [36.75149, 138.0826, 1237.8,],

                    [36.75154, 138.08272, 1238.1,],

                    [36.75163, 138.08282, 1238.2,],

                    [36.75183, 138.08306, 1238.9,],

                    [36.75214, 138.08321, 1239.5,],

                    [36.7524, 138.08322, 1240.7,],

                    [36.75238, 138.08322, 1240.6,],

                    [36.75265, 138.08321, 1241.3,],

                    [36.75278, 138.08323, 1241.9,],

                    [36.75289, 138.08329, 1242.3,],

                    [36.75294, 138.08329, 1242.3,],

                    [36.75313, 138.08325, 1243.2,],

                    [36.75331, 138.0833, 1244.9,],

                    [36.75358, 138.08351, 1246.8,],

                    [36.75394, 138.0838, 1249.1,],

                    [36.75433, 138.08406, 1252.2,],

                    [36.75451, 138.08414, 1253.4,],

                    [36.75453, 138.08415, 1253.4,],

                    [36.75467, 138.08434, 1254.4,],

                    [36.7548, 138.0845, 1253.8,],

                    [36.75483, 138.08461, 1253.7,],

                    [36.75509, 138.08467, 1252.3,],

                    [36.75527, 138.08479, 1251.7,],

                    [36.75563, 138.08495, 1251.2,],

                    [36.75577, 138.08505, 1250.8,],

                    [36.75603, 138.08538, 1250.6,],

                    [36.75615, 138.08565, 1251.4,],

                    [36.75633, 138.08601, 1251.4,],

                    [36.75638, 138.08615, 1251.7,],

                    [36.75638, 138.08629, 1251.7,],

                    [36.75629, 138.08645, 1253,],

                    [36.75624, 138.08659, 1254,],

                    [36.75621, 138.08668, 1254.5,],

                    [36.75607, 138.08714, 1256.7,],

                    [36.75602, 138.08725, 1257.4,],

                    [36.75605, 138.0874, 1258,],

                    [36.75605, 138.08767, 1259.2,],

                    [36.75604, 138.08772, 1259.1,],

                    [36.75592, 138.08781, 1258.9,],

                    [36.75594, 138.08797, 1259.5,],

                    [36.75593, 138.08806, 1260.3,],

                    [36.75587, 138.08819, 1261.2,],

                    [36.7558, 138.08818, 1260.8,],

                    [36.75571, 138.08814, 1261.1,],

                    [36.75561, 138.08815, 1262.3,],

                    [36.75549, 138.08826, 1263.9,],

                    [36.75538, 138.08838, 1265.5,],

                    [36.75524, 138.08856, 1267.3,],

                    [36.75513, 138.08875, 1268.7,],

                    [36.75514, 138.08895, 1270,],

                    [36.75512, 138.08903, 1270.5,],

                    [36.75512, 138.08914, 1271.3,],

                    [36.75517, 138.08925, 1272.1,],

                    [36.75521, 138.08929, 1272.7,],

                    [36.75525, 138.08938, 1273.6,],

                    [36.75527, 138.08945, 1274.4,],

                    [36.75526, 138.0895, 1274.8,],

                    [36.75521, 138.08958, 1275.1,],

                    [36.75517, 138.08963, 1275.2,],

                    [36.75518, 138.08977, 1276.3,],

                    [36.75515, 138.08988, 1277.3,],

                    [36.7551, 138.08996, 1277.7,],

                    [36.75501, 138.09004, 1277.2,],

                    [36.75492, 138.09013, 1277.4,],

                    [36.75489, 138.09025, 1278.5,],

                    [36.7549, 138.09035, 1279,],

                    [36.75494, 138.09041, 1279.4,],

                    [36.75497, 138.09058, 1281.2,],

                    [36.755, 138.09068, 1281.3,],

                    [36.75498, 138.0908, 1281.7,],

                    [36.7549, 138.09093, 1282.7,],

                    [36.75481, 138.09098, 1283.5,],

                    [36.75478, 138.09101, 1283.7,],

                    [36.75478, 138.09108, 1284.4,],

                    [36.75473, 138.09115, 1285.3,],

                    [36.75471, 138.09132, 1286.3,],

                    [36.75462, 138.09157, 1288.8,],

                    [36.75466, 138.09161, 1289,],

                    [36.75471, 138.09173, 1289.8,],

                    [36.75473, 138.09184, 1290.9,],

                    [36.75472, 138.09195, 1291.5,],

                    [36.75476, 138.09216, 1292.9,],

                    [36.75476, 138.09231, 1294,],

                    [36.75478, 138.09235, 1293.9,],

                    [36.75475, 138.09243, 1294.6,],

                    [36.75474, 138.09251, 1295.1,],

                    [36.75476, 138.09252, 1295.1,],

                    [36.75474, 138.09257, 1295.5,],

                    [36.75471, 138.09276, 1297.2,],

                    [36.75468, 138.09278, 1297.7,],

                    [36.75452, 138.09278, 1299,],

                    [36.75451, 138.09277, 1299,],

                    [36.75448, 138.0928, 1298,],

            ];
            var polyline = L.polyline(latlngs.map(function(latlng) { return [latlng[0], latlng[1]]; }), {color: 'blue'}).addTo(map);

            // 距離計算関数
            function calculateDistance(lat1, lon1, lat2, lon2) {
                function toRad(x) {
                    return x * Math.PI / 180;
                }
                var R = 6371; // 地球の半径 (km)
                var dLat = toRad(lat2 - lat1);
                var dLon = toRad(lon2 - lon1);
                var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                        Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) *
                        Math.sin(dLon / 2) * Math.sin(dLon / 2);
                var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
                return R * c;
            }

            // ローパスフィルタによる標高データのスムージング
            function lowPassFilter(elevations, alpha) {
                var smoothed = [elevations[0]]; // 初期値は最初の標高値
                for (var i = 1; i < elevations.length; i++) {
                    var smoothedValue = alpha * elevations[i] + (1 - alpha) * smoothed[i - 1];
                    smoothed.push(smoothedValue);
                }
                return smoothed;
            }

            // 累積距離計算 (水平距離)
            var distances = [0];
            var totalDistance = 0;
            for (var i = 1; i < latlngs.length; i++) {
                var d = calculateDistance(latlngs[i-1][0], latlngs[i-1][1], latlngs[i][0], latlngs[i][1]);
                totalDistance += d;
                distances.push(totalDistance);
            }

            // 累積距離計算 (沿面距離)
            function calculateSurfaceDistance(lat1, lon1, ele1, lat2, lon2, ele2) {
                var horizontalDistance = calculateDistance(lat1, lon1, lat2, lon2);
                var verticalDistance = (ele2 - ele1) / 1000; // m to km
                return Math.sqrt(horizontalDistance * horizontalDistance + verticalDistance * verticalDistance);
            }

            var surfaceDistances = [0];
            var totalSurfaceDistance = 0;
            for (var i = 1; i < latlngs.length; i++) {
                var d = calculateSurfaceDistance(latlngs[i-1][0], latlngs[i-1][1], latlngs[i-1][2], latlngs[i][0], latlngs[i][1], latlngs[i][2]);
                totalSurfaceDistance += d;
                surfaceDistances.push(totalSurfaceDistance);
            }

            // 標高データのスムージング
            var elevations = latlngs.map(function(latlng) { return latlng[2]; });
            var alpha = 0.167; // スムージング係数 (0.0 < alpha < 1.0)
            var smoothedElevations = lowPassFilter(elevations, alpha);

            // 累積標高計算
            var totalAscent = 0;
            var totalDescent = 0;
            var maxElevation = Math.max(...smoothedElevations);
            var minElevation = Math.min(...smoothedElevations);
            for (var i = 1; i < smoothedElevations.length; i++) {
                var diff = smoothedElevations[i] - smoothedElevations[i-1];
                if (diff > 0) {
                    totalAscent += diff;
                } else {
                    totalDescent += Math.abs(diff);
                }
            }

            // 水平距離と沿面距離の表示
            document.getElementById('horizontal-distance').innerText = totalDistance.toFixed(0);
            document.getElementById('surface-distance').innerText = totalSurfaceDistance.toFixed(0);

            // 累積標高と最高・最低標高の表示
            document.getElementById('total-ascent').innerText = totalAscent.toFixed(0);
            document.getElementById('total-descent').innerText = totalDescent.toFixed(0);
            document.getElementById('max-elevation').innerText = maxElevation.toFixed(0);
            document.getElementById('min-elevation').innerText = minElevation.toFixed(0);

            // 標高グラフの初期化
            var graphDiv = document.getElementById('graph');
            Plotly.newPlot(graphDiv, [{
                x: distances,
                y: smoothedElevations,
                type: 'scatter',
                mode: 'lines'
            }], {
                xaxis: { title: '距離 (km)' },
                yaxis: { title: '標高 (m)' }
            });

            // マーカーの初期化
            var marker = L.marker([latlngs[0][0], latlngs[0][1]]).addTo(map);

            // スライダーの設定
            var slider = document.getElementById('slider');
            slider.max = latlngs.length - 1;

            // マーカーとビューを更新する共通関数
            function updateMarkerAndView(idx) {
                var latlng = latlngs[idx];
                marker.setLatLng([latlng[0], latlng[1]]);
                map.setView([latlng[0], latlng[1]], 15);
                Plotly.Fx.hover('graph', [{
                    curveNumber: 0,
                    pointNumber: idx
                }]);
            }

            slider.addEventListener('input', function() {
                var idx = slider.value;
                updateMarkerAndView(idx);
            });

            // グラフのホバーイベント
            graphDiv.on('plotly_hover', function(eventdata) {
                var idx = eventdata.points[0].pointNumber;
                slider.value = idx;
                updateMarkerAndView(idx);
            });

            // グラフのクリックイベント
            graphDiv.on('plotly_click', function(eventdata) {
                var idx = eventdata.points[0].pointNumber;
                slider.value = idx;
                updateMarkerAndView(idx);
            });

            // 初期距離表示更新
            updateMarkerAndView(0);
        });
    </script>
</body>
</html>
