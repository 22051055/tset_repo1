<!DOCTYPE html>
<html>
<head>
    <title>黒姫to笹ヶ峰</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <style>
        #map, #graph {
            width: 100%;
            height: 50vh;
        }
        #slider-container {
            display: flex;
            justify-content: center;
            margin-top: 0px;
        }
        #slider {
            width: 100%;
        }
        #distances, #elevations, #checkpoint_time {
            text-align: center;
            margin-top: 10px;
        }        
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" />
</head>
<body>
    <div id="title"><a>黒姫to笹ヶ峰</a></div>
    <div id="map"></div>
    <div id="graph" style="touch-action: manipulation;"></div>
    <div id="slider-container">
        <input type="range" id="slider" min="0" max="100" value="0" />
    </div>
    <div id="distances">
        <p>水平距離: <span id="horizontal-distance"></span> km</p>
        <p>沿面距離: <span id="surface-distance"></span> km</p>
    </div>
    <div id="elevations">
        <p>累積標高上り: <span id="total-ascent"></span> m</p>
        <p>累積標高下り: <span id="total-descent"></span> m</p>
        <p>最高標高: <span id="max-elevation"></span> m</p>
        <p>最低標高: <span id="min-elevation"></span> m</p>
    </div>
    <div id="checkpoint_time"><a>笹ヶ峰関門時間 15日（日）17：00</a></div>
    <div>
        <a href="1_kurohime_to_sasagamine.gpx" download>GPXファイルをダウンロード</a>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
　　<script>
        $(document).ready(function() {
            // 地図の初期化
            var map = L.map('map').setView([36.82962, 138.16073], 14);
            L.tileLayer('https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png', {
                maxZoom: 18,
                attribution: '&copy; <a href="https://maps.gsi.go.jp/development/ichiran.html">国土地理院</a>'
            }).addTo(map);

            // GPXトラックの表示
            var latlngs = [
                
                    [36.82962, 138.16073, 823,],

                    [36.82961, 138.16065, 823,],

                    [36.82961, 138.1606, 822,],

                    [36.82959, 138.16052, 822,],

                    [36.82958, 138.1605, 822,],

                    [36.8295, 138.16046, 823,],

                    [36.8294, 138.16046, 826,],

                    [36.82932, 138.16052, 827,],

                    [36.82923, 138.16048, 828,],

                    [36.82914, 138.16038, 829,],

                    [36.82899, 138.16023, 832,],

                    [36.82891, 138.16013, 834,],

                    [36.82885, 138.16006, 836,],

                    [36.82879, 138.15998, 837,],

                    [36.82866, 138.15983, 840,],

                    [36.82858, 138.15978, 841,],

                    [36.8285, 138.15969, 843,],

                    [36.82845, 138.15961, 844,],

                    [36.82831, 138.15944, 847,],

                    [36.82825, 138.15938, 847,],

                    [36.82813, 138.15918, 851,],

                    [36.82809, 138.15896, 853,],

                    [36.82803, 138.1587, 853,],

                    [36.82797, 138.15845, 859,],

                    [36.82794, 138.15824, 865,],

                    [36.82791, 138.15809, 870,],

                    [36.82788, 138.15782, 876,],

                    [36.82782, 138.15749, 885,],

                    [36.82779, 138.15725, 891,],

                    [36.82773, 138.15697, 897,],

                    [36.82768, 138.15675, 902,],

                    [36.82763, 138.15651, 906,],

                    [36.82769, 138.15647, 907,],

                    [36.8278, 138.15638, 905,],

                    [36.82805, 138.15576, 910,],

                    [36.8281, 138.15557, 913,],

                    [36.8281, 138.15551, 914,],

                    [36.82806, 138.15543, 915,],

                    [36.82797, 138.15521, 918,],

                    [36.82796, 138.15504, 920,],

                    [36.82802, 138.15489, 922,],

                    [36.82821, 138.15488, 924,],

                    [36.82848, 138.15492, 925,],

                    [36.82872, 138.15489, 925,],

                    [36.8288, 138.15477, 928,],

                    [36.82888, 138.15454, 932,],

                    [36.82888, 138.15433, 932,],

                    [36.82875, 138.15404, 935,],

                    [36.82869, 138.15384, 936,],

                    [36.82866, 138.15368, 939,],

                    [36.82873, 138.1535, 941,],

                    [36.82877, 138.15338, 942,],

                    [36.82873, 138.15316, 943,],

                    [36.82863, 138.15288, 946,],

                    [36.82857, 138.15265, 947,],

                    [36.82848, 138.15242, 955,],

                    [36.82848, 138.15215, 956,],

                    [36.8285, 138.1517, 954,],

                    [36.82846, 138.1516, 954,],

                    [36.82836, 138.15134, 958,],

                    [36.82827, 138.15106, 958,],

                    [36.82827, 138.15086, 955,],

                    [36.82814, 138.15052, 963,],

                    [36.82804, 138.15022, 964,],

                    [36.82804, 138.15014, 964,],

                    [36.82809, 138.15004, 967,],

                    [36.82855, 138.15026, 964,],

                    [36.82868, 138.15035, 965,],

                    [36.82886, 138.15062, 967,],

                    [36.82927, 138.15096, 974,],

                    [36.82949, 138.15116, 977,],

                    [36.82981, 138.15158, 974,],

                    [36.82986, 138.15161, 977,],

                    [36.82996, 138.15163, 977,],

                    [36.83001, 138.15145, 979,],

                    [36.83001, 138.15126, 983,],

                    [36.82999, 138.15117, 983,],

                    [36.82993, 138.15079, 984,],

                    [36.82985, 138.15046, 990,],

                    [36.82983, 138.15027, 990,],

                    [36.8298, 138.15017, 992,],

                    [36.82956, 138.14958, 997,],

                    [36.82946, 138.14928, 1005,],

                    [36.82945, 138.14899, 1006,],

                    [36.82951, 138.14888, 1004,],

                    [36.82975, 138.14888, 1005,],

                    [36.8299, 138.14887, 1010,],

                    [36.83003, 138.14871, 1011,],

                    [36.83007, 138.14842, 1013,],

                    [36.83009, 138.14815, 1015,],

                    [36.83026, 138.14804, 1017,],

                    [36.83055, 138.14811, 1028,],

                    [36.83083, 138.14846, 1034,],

                    [36.8312, 138.14883, 1035,],

                    [36.83152, 138.14905, 1039,],

                    [36.83153, 138.14905, 1039,],

                    [36.83177, 138.14912, 1045,],

                    [36.83208, 138.1491, 1047,],

                    [36.8323, 138.149, 1046,],

                    [36.83239, 138.14887, 1046,],

                    [36.83262, 138.14849, 1045,],

                    [36.83266, 138.14842, 1047,],

                    [36.83272, 138.1483, 1050,],

                    [36.83276, 138.14828, 1050,],

                    [36.83286, 138.14822, 1055,],

                    [36.83324, 138.1479, 1055,],

                    [36.83329, 138.14787, 1054,],

                    [36.83338, 138.14776, 1053,],

                    [36.83338, 138.14747, 1054,],

                    [36.83337, 138.14727, 1057,],

                    [36.83343, 138.14712, 1063,],

                    [36.83353, 138.1471, 1064,],

                    [36.83372, 138.1471, 1064,],

                    [36.83379, 138.1471, 1063,],

                    [36.83391, 138.14687, 1064,],

                    [36.8339, 138.14669, 1065,],

                    [36.83399, 138.1465, 1065,],

                    [36.83402, 138.14626, 1065,],

                    [36.83402, 138.14617, 1065,],

                    [36.83401, 138.14609, 1067,],

                    [36.83394, 138.14596, 1070,],

                    [36.83394, 138.14585, 1073,],

                    [36.83397, 138.14576, 1075,],

                    [36.83428, 138.14559, 1075,],

                    [36.83435, 138.14551, 1075,],

                    [36.83447, 138.1453, 1075,],

                    [36.83464, 138.14513, 1074,],

                    [36.83466, 138.14499, 1080,],

                    [36.83472, 138.14473, 1084,],

                    [36.83474, 138.14464, 1085,],

                    [36.83488, 138.14442, 1084,],

                    [36.83491, 138.14433, 1085,],

                    [36.83489, 138.14405, 1088,],

                    [36.83482, 138.14394, 1092,],

                    [36.83454, 138.14366, 1096,],

                    [36.83448, 138.14356, 1097,],

                    [36.83443, 138.14345, 1098,],

                    [36.83444, 138.14336, 1100,],

                    [36.83453, 138.14321, 1101,],

                    [36.83473, 138.14295, 1104,],

                    [36.83479, 138.14289, 1105,],

                    [36.835, 138.14284, 1106,],

                    [36.83516, 138.1428, 1104,],

                    [36.83527, 138.14274, 1106,],

                    [36.83541, 138.14238, 1115,],

                    [36.83548, 138.1421, 1120,],

                    [36.83552, 138.14192, 1122,],

                    [36.83547, 138.1416, 1121,],

                    [36.83538, 138.14134, 1123,],

                    [36.83532, 138.14116, 1126,],

                    [36.83533, 138.14106, 1125,],

                    [36.83547, 138.14096, 1133,],

                    [36.83569, 138.14084, 1134,],

                    [36.83581, 138.14076, 1134,],

                    [36.83587, 138.14065, 1135,],

                    [36.83588, 138.14039, 1135,],

                    [36.83587, 138.14027, 1138,],

                    [36.83579, 138.14022, 1141,],

                    [36.8356, 138.14049, 1143,],

                    [36.83551, 138.14064, 1142,],

                    [36.83514, 138.14061, 1147,],

                    [36.83501, 138.14061, 1148,],

                    [36.8349, 138.14074, 1147,],

                    [36.83488, 138.14089, 1147,],

                    [36.83489, 138.14116, 1149,],

                    [36.83487, 138.14139, 1150,],

                    [36.83476, 138.14168, 1153,],

                    [36.83472, 138.14175, 1152,],

                    [36.83464, 138.14177, 1153,],

                    [36.83461, 138.14161, 1156,],

                    [36.83469, 138.14128, 1156,],

                    [36.83469, 138.14111, 1155,],

                    [36.83469, 138.141, 1155,],

                    [36.83465, 138.14085, 1156,],

                    [36.83461, 138.14078, 1162,],

                    [36.8346, 138.14061, 1165,],

                    [36.83459, 138.14049, 1167,],

                    [36.83481, 138.14031, 1165,],

                    [36.83492, 138.14022, 1163,],

                    [36.83496, 138.14017, 1167,],

                    [36.83499, 138.1401, 1168,],

                    [36.83493, 138.13986, 1174,],

                    [36.83496, 138.13976, 1174,],

                    [36.83497, 138.13963, 1174,],

                    [36.83496, 138.13954, 1174,],

                    [36.8346, 138.13928, 1180,],

                    [36.83448, 138.13914, 1185,],

                    [36.83441, 138.13898, 1185,],

                    [36.83441, 138.13885, 1184,],

                    [36.83444, 138.13872, 1183,],

                    [36.8345, 138.13863, 1185,],

                    [36.83465, 138.1386, 1185,],

                    [36.83494, 138.13855, 1187,],

                    [36.83526, 138.13843, 1192,],

                    [36.83554, 138.13829, 1195,],

                    [36.83568, 138.13825, 1194,],

                    [36.83616, 138.13828, 1196,],

                    [36.83642, 138.13834, 1195,],

                    [36.83659, 138.13834, 1202,],

                    [36.83662, 138.13824, 1203,],

                    [36.83659, 138.13789, 1210,],

                    [36.83655, 138.13746, 1217,],

                    [36.83656, 138.13725, 1220,],

                    [36.83661, 138.13706, 1223,],

                    [36.83673, 138.1369, 1225,],

                    [36.83694, 138.13689, 1224,],

                    [36.83714, 138.13691, 1224,],

                    [36.83731, 138.13672, 1223,],

                    [36.83732, 138.13627, 1224,],

                    [36.83729, 138.13562, 1236,],

                    [36.83733, 138.1353, 1236,],

                    [36.83764, 138.13433, 1235,],

                    [36.83764, 138.13414, 1236,],

                    [36.83764, 138.13401, 1235,],

                    [36.83758, 138.13389, 1236,],

                    [36.83751, 138.13369, 1236,],

                    [36.83702, 138.1329, 1245,],

                    [36.83686, 138.13264, 1244,],

                    [36.83678, 138.13253, 1244,],

                    [36.83664, 138.13245, 1247,],

                    [36.83635, 138.13237, 1256,],

                    [36.83613, 138.13236, 1254,],

                    [36.83597, 138.1324, 1256,],

                    [36.83577, 138.13249, 1259,],

                    [36.83577, 138.13249, 1259,],

                    [36.8356, 138.13256, 1262,],

                    [36.83548, 138.13249, 1265,],

                    [36.83543, 138.1323, 1264,],

                    [36.83546, 138.13204, 1266,],

                    [36.83547, 138.1318, 1264,],

                    [36.83549, 138.13174, 1264,],

                    [36.83542, 138.13147, 1266,],

                    [36.83538, 138.13135, 1267,],

                    [36.83532, 138.13117, 1269,],

                    [36.83541, 138.13106, 1266,],

                    [36.83562, 138.13095, 1264,],

                    [36.83581, 138.1308, 1263,],

                    [36.83592, 138.13043, 1265,],

                    [36.83594, 138.13018, 1266,],

                    [36.83593, 138.13004, 1266,],

                    [36.83594, 138.12983, 1266,],

                    [36.83596, 138.12965, 1265,],

                    [36.83606, 138.12931, 1265,],

                    [36.83607, 138.1291, 1266,],

                    [36.83604, 138.12886, 1274,],

                    [36.83599, 138.12871, 1276,],

                    [36.83599, 138.12867, 1279,],

                    [36.83606, 138.12856, 1283,],

                    [36.83626, 138.12863, 1285,],

                    [36.8365, 138.12902, 1279,],

                    [36.83662, 138.12924, 1274,],

                    [36.83677, 138.12937, 1280,],

                    [36.83696, 138.12936, 1284,],

                    [36.83698, 138.12914, 1283,],

                    [36.8369, 138.12879, 1287,],

                    [36.83693, 138.12858, 1286,],

                    [36.83704, 138.12854, 1285,],

                    [36.83734, 138.12876, 1285,],

                    [36.83754, 138.1288, 1283,],

                    [36.83759, 138.12873, 1284,],

                    [36.83761, 138.12866, 1282,],

                    [36.83762, 138.12841, 1284,],

                    [36.83762, 138.1283, 1285,],

                    [36.83781, 138.12805, 1281,],

                    [36.83789, 138.12793, 1280,],

                    [36.83791, 138.12783, 1278,],

                    [36.83792, 138.12751, 1277,],

                    [36.83799, 138.12727, 1276,],

                    [36.83826, 138.12693, 1274,],

                    [36.83864, 138.12659, 1274,],

                    [36.83887, 138.12653, 1274,],

                    [36.83904, 138.12653, 1271,],

                    [36.8392, 138.1263, 1272,],

                    [36.83933, 138.12612, 1272,],

                    [36.83988, 138.12598, 1265,],

                    [36.84033, 138.12614, 1261,],

                    [36.84114, 138.12649, 1255,],

                    [36.84148, 138.12661, 1254,],

                    [36.84164, 138.12651, 1254,],

                    [36.84168, 138.12646, 1254,],

                    [36.84174, 138.12641, 1252,],

                    [36.8419, 138.12593, 1255,],

                    [36.84217, 138.12533, 1246,],

                    [36.84231, 138.12512, 1246,],

                    [36.84247, 138.12497, 1246,],

                    [36.84281, 138.12473, 1246,],

                    [36.84297, 138.1246, 1245,],

                    [36.84302, 138.12449, 1246,],

                    [36.84303, 138.12418, 1248,],

                    [36.84284, 138.1238, 1244,],

                    [36.84278, 138.12373, 1244,],

                    [36.84259, 138.12367, 1244,],

                    [36.8423, 138.12356, 1245,],

                    [36.84222, 138.12347, 1245,],

                    [36.84218, 138.12336, 1245,],

                    [36.84225, 138.12314, 1244,],

                    [36.84235, 138.12288, 1240,],

                    [36.84231, 138.12261, 1242,],

                    [36.84228, 138.12235, 1241,],

                    [36.84229, 138.12216, 1237,],

                    [36.84238, 138.12194, 1241,],

                    [36.84246, 138.12181, 1246,],

                    [36.84265, 138.12174, 1246,],

                    [36.84297, 138.12162, 1243,],

                    [36.84329, 138.12133, 1243,],

                    [36.84343, 138.12108, 1244,],

                    [36.84351, 138.12059, 1244,],

                    [36.8435, 138.12038, 1245,],

                    [36.84345, 138.12008, 1247,],

                    [36.84345, 138.11989, 1248,],

                    [36.84351, 138.11954, 1246,],

                    [36.84362, 138.11951, 1245,],

                    [36.84379, 138.11928, 1241,],

                    [36.8439, 138.11911, 1240,],

                    [36.84412, 138.11847, 1239,],

                    [36.84441, 138.11759, 1236,],

                    [36.84456, 138.117, 1230,],

                    [36.84453, 138.11637, 1227,],

                    [36.84449, 138.11615, 1228,],

                    [36.8446, 138.11545, 1227,],

                    [36.84462, 138.11519, 1224,],

                    [36.84462, 138.11498, 1223,],

                    [36.84466, 138.11475, 1222,],

                    [36.84468, 138.11451, 1221,],

                    [36.84474, 138.11428, 1219,],

                    [36.8448, 138.11395, 1220,],

                    [36.84477, 138.11344, 1218,],

                    [36.84475, 138.11295, 1212,],

                    [36.84465, 138.1123, 1204.4,],

                    [36.84467, 138.11206, 1200.4,],

                    [36.84475, 138.11185, 1198,],

                    [36.84489, 138.11157, 1192.6,],

                    [36.84497, 138.11132, 1187.7,],

                    [36.845, 138.11089, 1178.1,],

                    [36.845, 138.11062, 1173.1,],

                    [36.845, 138.11048, 1172.5,],

                    [36.84495, 138.11031, 1171,],

                    [36.84441, 138.10973, 1175,],

                    [36.8439, 138.10924, 1175.5,],

                    [36.84378, 138.1091, 1174.4,],

                    [36.84365, 138.109, 1176.4,],

                    [36.8435, 138.10887, 1178.4,],

                    [36.84338, 138.10881, 1183,],

                    [36.84326, 138.1087, 1183.3,],

                    [36.84314, 138.10853, 1182.6,],

                    [36.84298, 138.1083, 1179.6,],

                    [36.84287, 138.10823, 1187.4,],

                    [36.84273, 138.10809, 1188.8,],

                    [36.84263, 138.10783, 1184.9,],

                    [36.84239, 138.1074, 1194.1,],

                    [36.84212, 138.10664, 1191.4,],

                    [36.84197, 138.10626, 1193.7,],

                    [36.84184, 138.10577, 1176.5,],

                    [36.84186, 138.10571, 1172.3,],

                    [36.84195, 138.10572, 1165.5,],

                    [36.84194, 138.1056, 1162.8,],

                    [36.84204, 138.10563, 1155.4,],

                    [36.84204, 138.10557, 1154.1,],

                    [36.8421, 138.10557, 1150,],

                    [36.84223, 138.10577, 1142.7,],

                    [36.84233, 138.10589, 1144.1,],

                    [36.84236, 138.10551, 1128.6,],

                    [36.84238, 138.10544, 1124.5,],

                    [36.8425, 138.10558, 1121.9,],

                    [36.84239, 138.10487, 1111.4,],

                    [36.8424, 138.10467, 1108,],

                    [36.84252, 138.10466, 1096.1,],

                    [36.84261, 138.10441, 1088.5,],

                    [36.8427, 138.10434, 1087,],

                    [36.84282, 138.10404, 1086.9,],

                    [36.84287, 138.10395, 1087.2,],

                    [36.84296, 138.10389, 1085.2,],

                    [36.84311, 138.10377, 1078.9,],

                    [36.84318, 138.10367, 1077.9,],

                    [36.84324, 138.10362, 1077.5,],

                    [36.84335, 138.10356, 1076.4,],

                    [36.84335, 138.10356, 1076.4,],

                    [36.84342, 138.10348, 1078,],

                    [36.84357, 138.1033, 1074.1,],

                    [36.84368, 138.10313, 1075.3,],

                    [36.84365, 138.10277, 1075.4,],

                    [36.84365, 138.1027, 1075.5,],

                    [36.84362, 138.10256, 1075.9,],

                    [36.84367, 138.10207, 1077.5,],

                    [36.8436, 138.10196, 1078.3,],

                    [36.8436, 138.10174, 1079.7,],

                    [36.84368, 138.10166, 1080.5,],

                    [36.84376, 138.10166, 1080.7,],

                    [36.84383, 138.10175, 1081.5,],

                    [36.84385, 138.10176, 1083.9,],

                    [36.8439, 138.10173, 1085.9,],

                    [36.84396, 138.10173, 1088.5,],

                    [36.84399, 138.1017, 1090,],

                    [36.84404, 138.10167, 1090,],

                    [36.84408, 138.10166, 1091,],

                    [36.84416, 138.10151, 1094.5,],

                    [36.84418, 138.10146, 1095.4,],

                    [36.8442, 138.10137, 1096.2,],

                    [36.84422, 138.10136, 1096.1,],

                    [36.84427, 138.10137, 1098.7,],

                    [36.84428, 138.10141, 1098.5,],

                    [36.8443, 138.10137, 1100.1,],

                    [36.84433, 138.10137, 1102.5,],

                    [36.84435, 138.10141, 1101.9,],

                    [36.84435, 138.10146, 1101.6,],

                    [36.8444, 138.10143, 1107.7,],

                    [36.84441, 138.10139, 1108.1,],

                    [36.84443, 138.10138, 1110.9,],

                    [36.84446, 138.10149, 1110.7,],

                    [36.84447, 138.10148, 1114.3,],

                    [36.84446, 138.10145, 1110.7,],

                    [36.84446, 138.10143, 1110.6,],

                    [36.84449, 138.10143, 1113.4,],

                    [36.84452, 138.10145, 1116.5,],

                    [36.84454, 138.10149, 1119.1,],

                    [36.84456, 138.10149, 1119.1,],

                    [36.84457, 138.10146, 1122.2,],

                    [36.84456, 138.10142, 1118.8,],

                    [36.84457, 138.10142, 1121.6,],

                    [36.84459, 138.10146, 1122.2,],

                    [36.84461, 138.10146, 1124.8,],

                    [36.84463, 138.10149, 1124.8,],

                    [36.84464, 138.1015, 1128.2,],

                    [36.84465, 138.10148, 1127.5,],

                    [36.84465, 138.10145, 1127.5,],

                    [36.84464, 138.10141, 1126.9,],

                    [36.84464, 138.10139, 1126.9,],

                    [36.84465, 138.10139, 1126.9,],

                    [36.84467, 138.10143, 1130.1,],

                    [36.84468, 138.10145, 1130.6,],

                    [36.8447, 138.10145, 1130.6,],

                    [36.84471, 138.10143, 1133.3,],

                    [36.84471, 138.10139, 1132.6,],

                    [36.84474, 138.10136, 1135.9,],

                    [36.84476, 138.10137, 1136,],

                    [36.84477, 138.10146, 1139.9,],

                    [36.84479, 138.10146, 1139.9,],

                    [36.84481, 138.10139, 1141.8,],

                    [36.84483, 138.10138, 1141.8,],

                    [36.84485, 138.1014, 1144.7,],

                    [36.84484, 138.10145, 1145.3,],

                    [36.84487, 138.10151, 1146.6,],

                    [36.84487, 138.10159, 1148,],

                    [36.84488, 138.10164, 1151.4,],

                    [36.8449, 138.10166, 1151.4,],

                    [36.84492, 138.10164, 1154.3,],

                    [36.84492, 138.1016, 1153.8,],

                    [36.84494, 138.10157, 1153.3,],

                    [36.84496, 138.10151, 1155,],

                    [36.84496, 138.10145, 1154,],

                    [36.84497, 138.10139, 1153,],

                    [36.84499, 138.10138, 1155.6,],

                    [36.84499, 138.10143, 1155.9,],

                    [36.84499, 138.10144, 1155.9,],

                    [36.845, 138.10142, 1155.9,],

                    [36.84501, 138.10137, 1155.6,],

                    [36.84504, 138.10134, 1157.9,],

                    [36.84505, 138.10132, 1160.7,],

                    [36.84506, 138.10134, 1160.8,],

                    [36.84508, 138.10132, 1163.5,],

                    [36.84506, 138.10128, 1160.7,],

                    [36.84506, 138.10126, 1162,],

                    [36.84509, 138.10128, 1163.5,],

                    [36.84512, 138.10129, 1166.3,],

                    [36.84511, 138.10122, 1165.6,],

                    [36.84509, 138.1012, 1165.6,],

                    [36.84509, 138.10112, 1168.4,],

                    [36.84507, 138.10107, 1167,],

                    [36.84505, 138.10104, 1168.6,],

                    [36.84504, 138.10097, 1169.4,],

                    [36.84504, 138.10093, 1170.8,],

                    [36.84507, 138.1009, 1172.9,],

                    [36.84508, 138.10092, 1174.8,],

                    [36.84511, 138.10094, 1173.7,],

                    [36.84512, 138.10094, 1175.7,],

                    [36.84514, 138.10086, 1177.7,],

                    [36.84513, 138.10082, 1178.9,],

                    [36.84513, 138.1008, 1179,],

                    [36.84515, 138.1008, 1179.9,],

                    [36.84517, 138.10081, 1180.9,],

                    [36.84519, 138.10081, 1182.9,],

                    [36.8452, 138.1008, 1180.9,],

                    [36.84524, 138.10088, 1184.3,],

                    [36.84526, 138.10088, 1186.1,],

                    [36.84528, 138.10088, 1186.1,],

                    [36.84529, 138.10088, 1187.9,],

                    [36.84532, 138.10089, 1191,],

                    [36.84532, 138.10093, 1189.7,],

                    [36.84535, 138.10097, 1188.6,],

                    [36.84538, 138.10099, 1190.2,],

                    [36.84539, 138.10099, 1192.9,],

                    [36.8454, 138.10095, 1193.6,],

                    [36.8454, 138.10088, 1196,],

                    [36.84541, 138.10086, 1196,],

                    [36.84542, 138.10083, 1197.5,],

                    [36.84545, 138.10072, 1200.7,],

                    [36.84549, 138.10074, 1202,],

                    [36.8455, 138.10077, 1202.9,],

                    [36.84554, 138.10079, 1204.1,],

                    [36.84561, 138.10081, 1206,],

                    [36.84562, 138.10085, 1205.7,],

                    [36.8457, 138.10089, 1207,],

                    [36.84572, 138.10093, 1206.9,],

                    [36.8458, 138.1011, 1206.5,],

                    [36.84589, 138.10122, 1206.2,],

                    [36.84599, 138.10132, 1205.8,],

                    [36.84609, 138.10133, 1206.3,],

                    [36.84631, 138.10155, 1206.8,],

                    [36.84643, 138.1016, 1207.9,],

                    [36.8465, 138.10167, 1208.4,],

                    [36.8467, 138.10171, 1210.3,],

                    [36.84697, 138.10182, 1214.4,],

                    [36.84702, 138.10167, 1215.2,],

                    [36.84718, 138.10152, 1217.9,],

                    [36.8473, 138.10151, 1219.1,],

                    [36.8474, 138.10175, 1220.1,],

                    [36.84759, 138.10189, 1223.2,],

                    [36.84767, 138.10205, 1223.3,],

                    [36.84777, 138.10229, 1224.1,],

                    [36.84787, 138.10253, 1224.3,],

                    [36.84797, 138.1027, 1224.5,],

                    [36.84803, 138.10284, 1224,],

                    [36.8481, 138.10287, 1224.5,],

                    [36.84814, 138.10286, 1225.1,],

                    [36.84824, 138.10279, 1226,],

                    [36.84827, 138.1027, 1227.2,],

                    [36.84826, 138.10263, 1228.1,],

                    [36.84842, 138.10243, 1231.8,],

                    [36.8484, 138.10232, 1232.2,],

                    [36.84849, 138.10228, 1233.5,],

                    [36.84862, 138.10236, 1234.8,],

                    [36.84911, 138.1024, 1241.2,],

                    [36.84929, 138.10268, 1244.3,],

                    [36.84937, 138.10274, 1245.9,],

                    [36.84964, 138.10318, 1251.7,],

                    [36.84967, 138.10326, 1251.9,],

                    [36.84975, 138.10337, 1251,],

                    [36.84985, 138.10347, 1249.6,],

                    [36.84998, 138.10348, 1247.9,],

                    [36.85006, 138.10345, 1247.5,],

                    [36.85016, 138.1034, 1247.3,],

                    [36.85028, 138.10328, 1247,],

                    [36.85043, 138.10303, 1246.5,],

                    [36.85051, 138.10286, 1246.7,],

                    [36.85055, 138.10277, 1246.6,],

                    [36.85063, 138.10273, 1246.6,],

                    [36.85073, 138.10259, 1246.7,],

                    [36.85084, 138.10234, 1247.2,],

                    [36.85093, 138.10227, 1247.4,],

                    [36.85099, 138.10229, 1247.6,],

                    [36.85122, 138.10214, 1248.2,],

                    [36.8513, 138.10209, 1248.7,],

                    [36.85136, 138.10209, 1248.9,],

                    [36.8514, 138.10204, 1249,],

                    [36.85144, 138.10174, 1249.7,],

                    [36.85145, 138.10145, 1250.1,],

                    [36.85145, 138.10135, 1250.3,],

                    [36.85147, 138.10127, 1250.6,],

                    [36.85154, 138.10117, 1250.5,],

                    [36.85176, 138.10103, 1251.2,],

                    [36.85193, 138.10098, 1251.5,],

                    [36.85185, 138.10068, 1253,],

                    [36.85191, 138.10034, 1257.9,],

                    [36.85197, 138.10008, 1262,],

                    [36.85191, 138.09992, 1260.2,],

                    [36.85196, 138.09972, 1259.9,],

                    [36.8522, 138.09919, 1260.5,],

                    [36.8524, 138.09883, 1261.3,],

                    [36.85252, 138.09862, 1262.1,],

                    [36.85251, 138.09855, 1261.7,],

                    [36.85274, 138.0982, 1262.9,],

                    [36.85288, 138.0981, 1263.8,],

                    [36.853, 138.09793, 1264.9,],

                    [36.85307, 138.09788, 1265.3,],

                    [36.85326, 138.09803, 1269.5,],

                    [36.85337, 138.09801, 1271,],

                    [36.85343, 138.09792, 1271.8,],

                    [36.85402, 138.09818, 1274.3,],

                    [36.85428, 138.09839, 1274.3,],

                    [36.85442, 138.09837, 1275.2,],

                    [36.85479, 138.09858, 1277.2,],

                    [36.85495, 138.09859, 1279.2,],

                    [36.85502, 138.09869, 1279.5,],

                    [36.85505, 138.09881, 1280.4,],

                    [36.85521, 138.09888, 1283.1,],

                    [36.85532, 138.09884, 1283.5,],

                    [36.85552, 138.09879, 1284.4,],

                    [36.85559, 138.09872, 1285.8,],

            ];
            var polyline = L.polyline(latlngs.map(function(latlng) { return [latlng[0], latlng[1]]; }), {color: 'blue'}).addTo(map);

            // 距離計算関数
            function calculateDistance(lat1, lon1, lat2, lon2) {
                function toRad(x) {
                    return x * Math.PI / 180;
                }
                var R = 6371; // 地球の半径 (km)
                var dLat = toRad(lat2 - lat1);
                var dLon = toRad(lon2 - lon1);
                var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                        Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) *
                        Math.sin(dLon / 2) * Math.sin(dLon / 2);
                var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
                return R * c;
            }

            // ローパスフィルタによる標高データのスムージング
            function lowPassFilter(elevations, alpha) {
                var smoothed = [elevations[0]]; // 初期値は最初の標高値
                for (var i = 1; i < elevations.length; i++) {
                    var smoothedValue = alpha * elevations[i] + (1 - alpha) * smoothed[i - 1];
                    smoothed.push(smoothedValue);
                }
                return smoothed;
            }

            // 累積距離計算 (水平距離)
            var distances = [0];
            var totalDistance = 0;
            for (var i = 1; i < latlngs.length; i++) {
                var d = calculateDistance(latlngs[i-1][0], latlngs[i-1][1], latlngs[i][0], latlngs[i][1]);
                totalDistance += d;
                distances.push(totalDistance);
            }

            // 累積距離計算 (沿面距離)
            function calculateSurfaceDistance(lat1, lon1, ele1, lat2, lon2, ele2) {
                var horizontalDistance = calculateDistance(lat1, lon1, lat2, lon2);
                var verticalDistance = (ele2 - ele1) / 1000; // m to km
                return Math.sqrt(horizontalDistance * horizontalDistance + verticalDistance * verticalDistance);
            }

            var surfaceDistances = [0];
            var totalSurfaceDistance = 0;
            for (var i = 1; i < latlngs.length; i++) {
                var d = calculateSurfaceDistance(latlngs[i-1][0], latlngs[i-1][1], latlngs[i-1][2], latlngs[i][0], latlngs[i][1], latlngs[i][2]);
                totalSurfaceDistance += d;
                surfaceDistances.push(totalSurfaceDistance);
            }

            // 標高データのスムージング
            var elevations = latlngs.map(function(latlng) { return latlng[2]; });
            var alpha = 0.167; // スムージング係数 (0.0 < alpha < 1.0)
            var smoothedElevations = lowPassFilter(elevations, alpha);

            // 累積標高計算
            var totalAscent = 0;
            var totalDescent = 0;
            var maxElevation = Math.max(...smoothedElevations);
            var minElevation = Math.min(...smoothedElevations);
            for (var i = 1; i < smoothedElevations.length; i++) {
                var diff = smoothedElevations[i] - smoothedElevations[i-1];
                if (diff > 0) {
                    totalAscent += diff;
                } else {
                    totalDescent += Math.abs(diff);
                }
            }

            // 水平距離と沿面距離の表示
            document.getElementById('horizontal-distance').innerText = totalDistance.toFixed(0);
            document.getElementById('surface-distance').innerText = totalSurfaceDistance.toFixed(0);

            // 累積標高と最高・最低標高の表示
            document.getElementById('total-ascent').innerText = totalAscent.toFixed(0);
            document.getElementById('total-descent').innerText = totalDescent.toFixed(0);
            document.getElementById('max-elevation').innerText = maxElevation.toFixed(0);
            document.getElementById('min-elevation').innerText = minElevation.toFixed(0);

            // 標高グラフの初期化
            var graphDiv = document.getElementById('graph');
            Plotly.newPlot(graphDiv, [{
                x: distances,
                y: smoothedElevations,
                type: 'scatter',
                mode: 'lines'
            }], {
                xaxis: { title: '距離 (km)' },
                yaxis: { title: '標高 (m)' }
            });

            // マーカーの初期化
            var marker = L.marker([latlngs[0][0], latlngs[0][1]]).addTo(map);

            // スライダーの設定
            var slider = document.getElementById('slider');
            slider.max = latlngs.length - 1;

            // マーカーとビューを更新する共通関数
            function updateMarkerAndView(idx) {
                var latlng = latlngs[idx];
                marker.setLatLng([latlng[0], latlng[1]]);
                map.setView([latlng[0], latlng[1]], 15);
                Plotly.Fx.hover('graph', [{
                    curveNumber: 0,
                    pointNumber: idx
                }]);
            }

            slider.addEventListener('input', function() {
                var idx = slider.value;
                updateMarkerAndView(idx);
            });

            // グラフのホバーイベント
            graphDiv.on('plotly_hover', function(eventdata) {
                var idx = eventdata.points[0].pointNumber;
                slider.value = idx;
                updateMarkerAndView(idx);
            });

            // グラフのクリックイベント
            graphDiv.on('plotly_click', function(eventdata) {
                var idx = eventdata.points[0].pointNumber;
                slider.value = idx;
                updateMarkerAndView(idx);
            });

            // 初期距離表示更新
            updateMarkerAndView(0);
        });
    </script>
</body>
</html>
